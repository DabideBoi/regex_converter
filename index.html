<html>
    <header>
        <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    </header>
    <head>
        <title>Regex Converter</title>
    </head>
    <body>
        <div class="container mt-5 mb-1">
                <div class="form-group">
                  <label for="exampleInputEmail1">( b + aa + ab ) ( a + b )* ( bb + aba + ab )* ( aaa + bbb ) ( a + b ) ( a + b + ab )*</label>
                  <input type="text" class="form-control" id="exampleInputWord1" aria-describedby="wordHelp" placeholder="Enter word (e.g. aaababbba)">
                  <small id="emailHelp" class="form-text text-muted">Sample word: aaababbba (brought to you by Anya)</small>
                </div>
                  
                <button button id="submit-button1" pys-onClick="my_function1" class="btn btn-primary">Submit</button>
                <button button id="clear-button1" pys-onClick="clear1" class="btn btn-danger">Clear</button>
                
                <div></div>
                <div id="test-output1" class="mt-5 mb-5"></div>
        </div>

        <div id="test-output1"></div>

        <div class="container mt-1 mb-1">
                <div class="form-group">
                  <label for="exampleInputEmail1">( 1 + 0 )* (11 + 00 + 101 + 010) ( 1 + 0 + 11 + 00 + 101 )* ( 11 + 00 ) ( 11+ 00 + 101 )* ( 1 + 0 ) ( 1 + 0 + 11 )*</label>
                  <input type="text" class="form-control" id="exampleInputWord2" aria-describedby="wordHelp" placeholder="Enter word (e.g. 0010111001)">
                  <small id="emailHelp" class="form-text text-muted">Sample word: 0010111001 (brought to you by Mommy Yor)</small>
                </div>
                  
                <button button id="submit-button2" pys-onClick="my_function2" class="btn btn-primary">Submit</button>
                <button button id="clear-button2" pys-onClick="clear2" class="btn btn-danger">Clear</button>
                
                <div></div>
                <div id="test-output2" class="mt-5 mb-5"></div>  
        </div>   

        <div class="container justify-content-center align-items-center d-flex flex-column">
              <div class="card mb-3" style="width: 36rem;">
                <img class="card-img-top" src="https://media.discordapp.net/attachments/754335806503780382/991966235745075240/unknown.png" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">DFA #1</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                  </div>
              </div>
              <div class="card mb-3" style="width: 36rem;">
                <img class="card-img-top" src="https://media.discordapp.net/attachments/754335806503780382/991965438076534835/unknown.png" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">DFA #2</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                  </div>
            </div>
              
        </div>

        <py-env>
            - pythomata
        </py-env>
        <py-script>
            from pythomata import SimpleDFA
            def my_function1(*args, **kwargs):
                word = Element('exampleInputWord1').element.value 
                chunks = word.split(', ')
                alphabet = {"a", "b"}
                states = {"s1", "s2", "s3", "s4", "s5", "s6", "s7", "s8", "s9"}
                initial_state = "s1"
                accepting_states = {"s9"}
                transition_function = {
                    "s1": {
                        "b" : "s3",
                        "a" : "s2"
                    },
                    "s2": {
                        "b" : "s3",
                        "a" : "s3"
                    },
                    "s3": {
                        "b" : "s5",
                        "a" : "s4"
                    },
                    "s4": {
                        "b" : "s5",
                        "a" : "s6"
                    },
                    "s5": {
                        "b" : "s7",
                        "a" : "s4"
                    },
                    "s6": {
                        "b" : "s5",
                        "a" : "s8"
                    },
                    "s7": {
                        "b" : "s8",
                        "a" : "s4"
                    },
                    "s8": {
                        "b" : "s9",
                        "a" : "s9"
                    },
                    "s9": {
                        "b" : "s9",
                        "a" : "s9"
                    }
                
                }
                dfa = SimpleDFA(states, alphabet, initial_state, accepting_states, transition_function)
                #"aaababbba"
                #word = "abbabaaaabab"
                #word = "bbaabbbbbabab"
                answer = []
                for stuff in chunks:
                    boolean = str(dfa.accepts(stuff))
                    final =  stuff + " = " + boolean
                    answer.append(final)
                answer = '\n'.join(answer)
                Element('test-output1').element.innerText = answer

            def my_function2(*args, **kwargs):
                word = Element('exampleInputWord2').element.value 
                chunks = word.split(', ')
                alphabet = {"1", "0"}
                states = {"s1", "s2", "s3", "s4", "s5", "s6", "s7", "s8", "s9"}
                initial_state = "s1"
                accepting_states = {"s9"}
                transition_function = {
                    "s1": {
                        "1" : "s3",
                        "0" : "s2"
                    },
                    "s2": {
                        "1" : "s4",
                        "0" : "s5"
                    },
                    "s3": {
                        "1" : "s5",
                        "0" : "s4"
                    },
                    "s4": {
                        "1" : "s5",
                        "0" : "s5"
                    },
                    "s5": {
                        "1" : "s6",
                        "0" : "s7"
                    },
                    "s6": {
                        "1" : "s8",
                        "0" : "s7"
                    },
                    "s7": {
                        "1" : "s6",
                        "0" : "s8"
                    },
                    "s8": {
                        "1" : "s9",
                        "0" : "s9"
                    },
                    "s9": {
                        "1" : "s9",
                        "0" : "s9"
                    },
                }
                
                dfa = SimpleDFA(states, alphabet, initial_state, accepting_states, transition_function)
                word = Element('exampleInputWord2').element.value 
                #"aaababbba"
                #word = "abbabaaaabab"
                #word = "bbaabbbbbabab"
                answer = []
                for stuff in chunks:
                    boolean = str(dfa.accepts(stuff))
                    final =  stuff + " = " + boolean
                    answer.append(final)
                answer = '\n'.join(answer)
                Element('test-output2').element.innerText = answer

            def clear1(*args, **kwargs):
                Element('test-output1').element.innerText = ""

            def clear2(*args, **kwargs):
                Element('test-output2').element.innerText = ""

        </py-script>
    </body>
</html>
